Setting _echo_command = true
%%> "\\try"
%%> "\\get[@status]"
@status = 0
%%> "\\try"
%%> "\\get[@status]"
@status = 0
%%> "\\try %% this is not a comment!"
%%> "%% this is not a comment!"
%% this is not a comment!
%%> "\\get[@status]"
@status = 0
%%> "\\try \\bash echo \"\""
%%> "\\bash echo \"\""
%%> "\\get[@status]"
@status = 0
%%> "\\try \\set[complex_var=\"value with spaces and special chars !@#$%\"]"
%%> "\\set[complex_var=\"value with spaces and special chars !@#$%\"]"
Setting complex_var = value with spaces and special chars !@#$%
%%> "\\get[@status]"
@status = 0
%%> "\\get[complex_var]"
complex_var = value with spaces and special chars !@#$%
%%> "\\try \\set[_system_var=\"should fail\"]"
%%> "\\set[_system_var=\"should fail\"]"
%%> "\\get[@status]"
@status = 1
%%> "\\get[@error]"
@error = failed to set variable _system_var: variable name cannot start with _ unless whitelisted
%%> "\\try \\bash echo 'special chars: !@#$%^&*()'"
%%> "\\bash echo 'special chars: !@#$%^&*()'"
special chars: !@#$%^&*()
%%> "\\get[@status]"
@status = 0
%%> "\\get[_output]"
_output = special chars: !@#$%^&*()
%%> "\\try \\bash sleep 0.1"
%%> "\\bash sleep 0.1"
%%> "\\get[@status]"
@status = 0
%%> "\\try \\bash sh -c 'echo \"stdout\"; echo \"stderr\" >&2; exit 1'"
%%> "\\bash sh -c 'echo \"stdout\"; echo \"stderr\" >&2; exit 1'"
stdout
Error: stderr
<non_zero_exit_status>
%%> "\\get[@status]"
@status = 1
%%> "\\get[@error]"
@error = stderr
%%> "\\get[_output]"
_output = stdout
%%> "\\bash echo \"regular command\""
regular command
%%> "\\get[@status]"
@status = 0
%%> "\\try \\bash ls /nonexistent"
%%> "\\bash ls /nonexistent"
Error: <ls_error_macos>
<non_zero_exit_status>
%%> "\\bash echo \"after try\""
after try
%%> "\\get[@status]"
@status = 0