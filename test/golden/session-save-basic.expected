Setting _echo_command = true
%%> "\\try \\bash rm -rf /tmp/neuroshell-test-config/sessions"
%%> "\\bash rm -rf /tmp/neuroshell-test-config/sessions"
%%> "\\config-path"
Config Directory: /tmp/neuroshell-test-config (exists)
Config .env: /tmp/neuroshell-test-config/.env (not found)
Local .env: /tmp/neuroshell-test-workdir/.env (not found)
%%> "\\session-new[system=\"You are a helpful assistant for testing session-save functionality\"] save_test_session"
Created session 'save_test_session' (ID: 00000001)
%%> "\\silent \\session-activate[id=true] 00000001-0000-4000-8000-000000000001"
%%> "\\session-add-usermsg This is a test message to verify the session-save command works correctly"
Added user message to session 'save_test_session'
%%> "\\silent \\session-activate[id=true] 00000001-0000-4000-8000-000000000001"
%%> "\\session-add-assistantmsg I understand! I'm here to help test the session-save functionality. The session should be saved to the auto-save directory."
Added assistant message to session 'save_test_session'
%%> "\\silent \\session-activate[id=true] 00000001-0000-4000-8000-000000000001"
%%> "\\session-show save_test_session"
Session: save_test_session (ID: 00000001)
System: You are a helpful assistant for testing session-save functionality
Created: 2025-01-01 00:00:01
Updated: 2025-01-01 00:00:05
Messages: 2 total

[1] user (00:00:02): This is a test message to verify the session-save command works correctly
[2] assistant (00:00:04): I understand! I'm here to help test the ... be saved to the auto-save directory. (123 chars)
%%> "\\silent \\session-activate[id=true] 00000001-0000-4000-8000-000000000001"
%%> "\\get[#session_id]"
#session_id = 00000001-0000-4000-8000-000000000001
%%> "\\session-save save_test_session"
Session saved to sessions/00000001-0000-4000-8000-000000000001.json
%%> "\\bash ls /tmp/neuroshell-test-config/sessions/ | sort"
00000001-0000-4000-8000-000000000001.json
%%> "\\cat /tmp/neuroshell-test-config/sessions/${#session_id}.json"
{
  "id": "00000001-0000-4000-8000-000000000001",
  "name": "save_test_session",
  "system_prompt": "You are a helpful assistant for testing session-save functionality",
  "messages": [
    {
      "id": "00000002-0000-4000-8000-000000000002",
      "role": "user",
      "content": "This is a test message to verify the session-save command works correctly",
      "timestamp": "2025-01-01T00:00:02Z"
    },
    {
      "id": "00000003-0000-4000-8000-000000000003",
      "role": "assistant",
      "content": "I understand! I'm here to help test the session-save functionality. The session should be saved to the auto-save directory.",
      "timestamp": "2025-01-01T00:00:04Z"
    }
  ],
  "created_at": "2025-01-01T00:00:01Z",
  "updated_at": "2025-01-01T00:00:05Z",
  "is_active": true
}
%%> "\\session-save ${#session_id}"
Session saved to sessions/00000001-0000-4000-8000-000000000001.json
%%> "\\bash ls /tmp/neuroshell-test-config/sessions/ | sort"
00000001-0000-4000-8000-000000000001.json
%%> "\\session-save save_test"
Session saved to sessions/00000001-0000-4000-8000-000000000001.json
%%> "\\get[_output]"
_output = Session saved to sessions/00000001-0000-4000-8000-000000000001.json
%%> "\\session-new[system=\"Second test session\"] second_save_test"
Created session 'second_save_test' (ID: 00000004)
%%> "\\silent \\session-activate[id=true] 00000004-0000-4000-8000-000000000004"
%%> "\\session-add-usermsg Another test message for the second session"
Added user message to session 'second_save_test'
%%> "\\silent \\session-activate[id=true] 00000004-0000-4000-8000-000000000004"
%%> "\\get[#session_id]"
#session_id = 00000004-0000-4000-8000-000000000004
%%> "\\set[second_session_id=\"${#session_id}\"]"
Setting second_session_id = 00000004-0000-4000-8000-000000000004
%%> "\\session-save second_save_test"
Session saved to sessions/00000004-0000-4000-8000-000000000004.json
%%> "\\bash ls /tmp/neuroshell-test-config/sessions/ | sort"
00000001-0000-4000-8000-000000000001.json
00000004-0000-4000-8000-000000000004.json
%%> "\\bash echo \"Number of saved sessions:\""
Number of saved sessions:
%%> "\\bash ls -1 /tmp/neuroshell-test-config/sessions/*.json | wc -l"
       2
%%> "\\echo Testing error cases:"
Testing error cases:
%%> "\\try \\session-save nonexistent_session_name"
%%> "\\session-save nonexistent_session_name"
%%> "\\try \\session-save \"\""
%%> "\\session-save \"\""
%%> "\\try \\bash rm -rf /tmp/neuroshell-test-config/sessions"
%%> "\\bash rm -rf /tmp/neuroshell-test-config/sessions"