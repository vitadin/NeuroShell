Setting _echo_command = true
%%> "\\set[true_flag=\"true\"]"
Setting true_flag = true
%%> "\\set[false_flag=\"false\"]"
Setting false_flag = false
%%> "\\set[yes_flag=\"yes\"]"
Setting yes_flag = yes
%%> "\\set[no_flag=\"no\"]"
Setting no_flag = no
%%> "\\set[empty_flag=\"\"]"
Setting empty_flag = 
%%> "\\set[number_one=\"1\"]"
Setting number_one = 1
%%> "\\set[number_zero=\"0\"]"
Setting number_zero = 0
%%> "\\if[condition=${true_flag}] \\echo \"Variable true_flag worked\""
%%> "\\echo \"Variable true_flag worked\""
"Variable true_flag worked"
%%> "\\if[condition=${false_flag}] \\echo \"This should not appear - false_flag\""
%%> "\\if[condition=${yes_flag}] \\echo \"Variable yes_flag is truthy\""
%%> "\\echo \"Variable yes_flag is truthy\""
"Variable yes_flag is truthy"
%%> "\\if[condition=${number_one}] \\echo \"Variable number_one is truthy\""
%%> "\\echo \"Variable number_one is truthy\""
"Variable number_one is truthy"
%%> "\\if[condition=${no_flag}] \\echo \"This should not appear - no_flag\""
%%> "\\if[condition=${number_zero}] \\echo \"This should not appear - number_zero\""
%%> "\\if[condition=${empty_flag}] \\echo \"This should not appear - empty_flag\""
%%> "\\if[condition=${#test_mode}] \\echo \"System variable test_mode is true\""
%%> "\\echo \"System variable test_mode is true\""
"System variable test_mode is true"
%%> "\\set[user_check=\"${@user}\"]"
Setting user_check = testuser
%%> "\\if[condition=${user_check}] \\echo \"User variable is truthy: ${@user}\""
%%> "\\echo \"User variable is truthy: testuser\""
"User variable is truthy: testuser"
%%> "\\set[flag_name=\"true_flag\"]"
Setting flag_name = true_flag
%%> "\\set[nested_condition=\"${${flag_name}}\"]"
Setting nested_condition = true
%%> "\\get[nested_condition]"
nested_condition = true
%%> "\\if[condition=${nested_condition}] \\echo \"Nested interpolation worked\""
%%> "\\echo \"Nested interpolation worked\""
"Nested interpolation worked"
%%> "\\set[command_name=\"echo\"]"
Setting command_name = echo
%%> "\\set[message=\"Variable interpolation in command\"]"
Setting message = Variable interpolation in command
%%> "\\if[condition=true] \\${command_name} \"${message}\""
%%> "\\echo \"Variable interpolation in command\""
"Variable interpolation in command"
%%> "\\set[prefix=\"user\"]"
Setting prefix = user
%%> "\\set[suffix=\"flag\"]"
Setting suffix = flag
%%> "\\set[user_flag=\"enabled\"]"
Setting user_flag = enabled
%%> "\\if[condition=${${prefix}_${suffix}}] \\echo \"Complex interpolation: ${prefix}_${suffix} = ${user_flag}\""
%%> "\\echo \"Complex interpolation: user_flag = enabled\""
"Complex interpolation: user_flag = enabled"
%%> "\\set[literal_pattern=\"\\${not_a_var}\"]"
Setting literal_pattern = \
%%> "\\get[literal_pattern]"
literal_pattern = \
%%> "\\if[condition=true] \\echo \"Pattern not re-expanded: ${literal_pattern}\""
%%> "\\echo \"Pattern not re-expanded: \\\""
"Pattern not re-expanded: "
%%> "\\set[test_result=\"working\"]"
Setting test_result = working
%%> "\\if[condition=${test_result}] \\set[interpolation_success=\"true\"]"
%%> "\\set[interpolation_success=\"true\"]"
Setting interpolation_success = true
%%> "\\get[interpolation_success]"
interpolation_success = true