%% Test session-rename error handling
\set[_echo_command="true"]

%% Test error when no active session exists
\try \session-rename New Name
\get[@error]

%% Create sessions for testing
\session-new test_session_one
\session-new test_session_two

%% Test error when new name is empty
\try \session-rename ""
\get[@error]

%% Test error when new name is only whitespace
\try \session-rename "   "
\get[@error]

%% Test error when specified session doesn't exist
\try \session-rename[session=nonexistent_session] New Name
\get[@error]

%% Test error when trying to rename to existing session name
\try \session-rename[session=test_session_one] test_session_two
\get[@error]

%% Test successful rename to verify command works
\session-rename[session=test_session_one] valid_new_name
\get[_output]

%% Clean up
\session-delete valid_new_name
\session-delete test_session_two