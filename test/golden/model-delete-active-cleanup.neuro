%% Test model deletion with active model cleanup
\set[_echo_command="true"]

%% Create models
\model-new[catalog_id="O4MC"] current-model
\model-new[catalog_id="O3R"] backup-model

%% Activate one model
\model-activate current-model

%% Verify it's active
\get[#active_model_name]
\get[#active_model_id]

%% Delete the active model
\model-delete current-model

%% Verify active model was cleared (should be empty)
\get[#active_model_name]
\get[#active_model_id]

%% Verify deletion variables were set
\get[#deleted_model_name]
\get[_output]

%% Verify other model remains unaffected
\model-status

%% Try to activate the deleted model (should fail)
\try \model-activate current-model

%% Activate the remaining model to ensure system still works
\model-activate backup-model
\get[#active_model_name]