Setting _echo_command = true
%%> "\\set[api_key=\"sk-test-key-123\"]"
Setting api_key = sk-test-key-123
%%> "\\set[model_name=\"gpt-4\"]"
Setting model_name = gpt-4
%%> "\\set[user_message=\"Hello, how are you?\"]"
Setting user_message = Hello, how are you?
%%> "\\set[response_text=\"I'm doing well, thank you!\"]"
Setting response_text = I'm doing well, thank you!
%%> "\\set[status_code=\"200\"]"
Setting status_code = 200
%%> "\\set[simple_json={\"model\": \"${model_name}\", \"status\": ${status_code}}]"
Setting simple_json = {"model": "gpt-4", "status": 200}
%%> "\\echo Simple JSON with variables:"
Simple JSON with variables:
%%> "\\echo-json ${simple_json}"
{
  "model": "gpt-4",
  "status": 200
}
%%> "\\set[api_request={\"model\": \"${model_name}\", \"messages\": [{\"role\": \"user\", \"content\": \"${user_message}\"}], \"temperature\": 0.7}]"
Setting api_request = {"model": "gpt-4", "messages": [{"role": "user", "content": "Hello, how are you?"}], "temperature": 0.7}
%%> "\\echo API Request JSON:"
API Request JSON:
%%> "\\echo-json ${api_request}"
{
  "messages": [
    {
      "content": "Hello, how are you?",
      "role": "user"
    }
  ],
  "model": "gpt-4",
  "temperature": 0.7
}
%%> "\\set[api_response={\"choices\": [{\"message\": {\"role\": \"assistant\", \"content\": \"${response_text}\"}}], \"usage\": {\"total_tokens\": 25}}]"
Setting api_response = {"choices": [{"message": {"role": "assistant", "content": "I'm doing well, thank you!"}}], "usage": {"total_tokens": 25}}
%%> "\\echo API Response JSON:"
API Response JSON:
%%> "\\echo-json ${api_response}"
{
  "choices": [
    {
      "message": {
        "content": "I'm doing well, thank you!",
        "role": "assistant"
      }
    }
  ],
  "usage": {
    "total_tokens": 25
  }
}
%%> "\\set[system_info={\"test_mode\": \"${#test_mode}\", \"user\": \"${@user}\", \"timestamp\": \"{{TIMESTAMP}}\"}]"
Setting system_info = {"test_mode": "true", "user": "testuser", "timestamp": "{{TIMESTAMP}}"}
%%> "\\echo System Info JSON:"
System Info JSON:
%%> "\\echo-json ${system_info}"
{
  "test_mode": "true",
  "timestamp": "{{TIMESTAMP}}",
  "user": "testuser"
}
%%> "\\echo-json[to=stored_request] ${api_request}"
{
  "messages": [
    {
      "content": "Hello, how are you?",
      "role": "user"
    }
  ],
  "model": "gpt-4",
  "temperature": 0.7
}
%%> "\\echo Stored API request:"
Stored API request:
%%> "\\get[stored_request]"
stored_request = {                     
  "messages": [                        
    {                                  
      "content": "Hello, how are you?",
      "role": "user"                   
    }                                  
  ],                                   
  "model": "gpt-4",                    
  "temperature": 0.7                   
}                                      
%%> "\\set[with_undefined={\"defined\": \"${model_name}\", \"undefined\": \"${not_defined}\", \"empty\": \"\"}]"
Setting with_undefined = {"defined": "gpt-4", "undefined": "", "empty": ""}
%%> "\\echo JSON with undefined variables:"
JSON with undefined variables:
%%> "\\echo-json ${with_undefined}"
{
  "defined": "gpt-4",
  "empty": "",
  "undefined": ""
}
%%> "\\echo Compact JSON with variables:"
Compact JSON with variables:
%%> "\\echo-json[indent=0] ${api_request}"
{"messages":[{"content":"Hello, how are you?","role":"user"}],"model":"gpt-4","temperature":0.7}
%%> "\\echo 4-space JSON with variables:"
4-space JSON with variables:
%%> "\\echo-json[indent=4] ${api_response}"
{
    "choices": [
        {
            "message": {
                "content": "I'm doing well, thank you!",
                "role": "assistant"
            }
        }
    ],
    "usage": {
        "total_tokens": 25
    }
}