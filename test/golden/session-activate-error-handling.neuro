%% Test session-activate error handling scenarios
\set[_echo_command="true"]

%% Test error when trying to activate non-existent session by name
\try \session-activate nonexistent_session
\get[_error]

%% Test error when trying to activate by non-existent ID
\try \session-activate[id=true] 99999999
\get[_error]

%% Create multiple sessions with similar names for ambiguous match testing
\session-new work_proj
\session-new work_project
\session-new work_project_alpha

%% Test ambiguous name match error
\try \session-activate work_proj
\get[_error]

%% Create sessions for ID prefix ambiguity test (in test mode, IDs are sequential)
\session-new session_a
\session-new session_b

%% Test ambiguous ID prefix match error (using prefix that matches multiple)
\try \session-activate[id=true] 0000000
\get[_error]

%% Test successful activation after fixing ambiguity
\session-activate work_project_alpha
\get[#active_session_name]

%% Test specific ID activation
\session-activate[id=true] 00000001
\get[#active_session_name]

%% Clean up all sessions
\session-delete work_proj
\session-delete work_project
\session-delete work_project_alpha
\session-delete session_a
\session-delete session_b

%% Test error when no sessions exist after cleanup
\try \session-activate some_session
\get[_error]