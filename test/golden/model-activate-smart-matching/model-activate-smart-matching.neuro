%% Test model activation smart matching functionality
\set[_echo_command="true"]

%% Create models with similar names for testing partial matching
\model-new[catalog_id="CS4"] my-claude-model
\model-new[catalog_id="O3"] my-openai-model
\model-new[provider="anthropic", base_model="claude-3-sonnet"] another-claude

%% Test partial name matching (should match unique substring)
\model-activate openai

%% Verify correct model was activated
\get[#active_model_name]
\get[_output]

%% Test ID prefix matching
\get[#active_model_id]
\set[id_prefix="${#active_model_id}"]
\model-activate[id=true] ${id_prefix}

%% Verify ID matching worked (should be same model)
\get[#active_model_name]
\get[_output]

%% Test case insensitive matching with unique substring
\model-activate MY-CLAUDE

%% Verify case insensitive worked
\get[#active_model_name]