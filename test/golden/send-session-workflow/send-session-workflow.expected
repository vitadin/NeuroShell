Setting _echo_command = true
%%> "\\send Hello from empty state - this should auto-activate or create session"
%%> "\\session-activate"
No sessions found. Use \session-new to create a session.
%%> "\\set[session_id=\"${_session_id}\"]"
Setting session_id = 
%%> "\\set[empty_check=\"${session_id}\"]"
Setting empty_check = 
%%> "\\set[need_new=\"yes\"]"
Setting need_new = yes
%%> "\\if[condition=\"${empty_check}\"] \\set[need_new=\"\"]"
%%> "\\if[condition=\"${need_new}\"] \\session-new"
%%> "\\session-new"
Auto-generated session name: 'Session 1'
Created session 'Session 1' (ID: 00000001)
%%> "\\if[condition=\"${need_new}\"] \\set[session_id=\"${#session_id}\"]"
%%> "\\set[session_id=\"00000001-0000-4000-8000-000000000001\"]"
Setting session_id = 00000001-0000-4000-8000-000000000001
%%> "\\session-add-usermsg[session=${session_id}] ${_1}"
Added user message to session '00000001-0000-4000-8000-000000000001'
%%> "\\llm-client-get[provider=openai]"
LLM client ready: openai:b10394de (configured: true)
%%> "\\set[client_id=\"${_client_id}\"]"
Setting client_id = openai:b10394de
%%> "\\get[#active_model_name]"
#active_model_name = 
%%> "\\set[has_model=\"${#active_model_name}\"]"
Setting has_model = 
%%> "\\set[need_model=\"yes\"]"
Setting need_model = yes
%%> "\\if[condition=\"${has_model}\"] \\set[need_model=\"\"]"
%%> "\\if[condition=\"${need_model}\"] \\model-new[catalog_id=O4M] default_model"
%%> "\\model-new[catalog_id=O4M] default_model"
Created model 'default_model' (ID: 00000003, Provider: openai, Base: o4-mini)
%%> "\\if[condition=\"${need_model}\"] \\model-activate default_model"
%%> "\\model-activate default_model"
Activated model 'default_model' (ID: 00000003, Provider: openai, Base: o4-mini)
%%> "\\llm-call[client_id=${client_id}, session_id=${session_id}]"
This is a mocking reply (received 1 messages, last: Hello from empty state - this should auto-activate or create session)
%%> "\\session-add-assistantmsg[session=${session_id}] ${_output}"
Added assistant message to session '00000001-0000-4000-8000-000000000001'
%%> "\\set[1=\"${_output}\"]"
Setting 1 = This is a mocking reply (received 1 messages, last: Hello from empty state - this should auto-activate or create session)
%%> "\\render-markdown ${_output}"
  This is a mocking reply (received 1 messages, last: Hello from empty state -
  this should auto-activate or create session)                                
%%> "\\get[#active_session_name]"
#active_session_name = 
%%> "\\get[#active_session_id]"
#active_session_id = 
%%> "\\session-new[system=\"You are a work assistant\"] work_session"
Created session 'work_session' (ID: 00000005)
%%> "\\session-new[system=\"You are a personal assistant\"] personal_session"
Created session 'personal_session' (ID: 00000006)
%%> "\\send This should go to personal session"
%%> "\\session-activate"
Active session: personal_session (ID: 00000006)
%%> "\\set[session_id=\"${_session_id}\"]"
Setting session_id = 00000006-0000-4000-8000-000000000006
%%> "\\set[empty_check=\"${session_id}\"]"
Setting empty_check = 00000006-0000-4000-8000-000000000006
%%> "\\set[need_new=\"yes\"]"
Setting need_new = yes
%%> "\\if[condition=\"${empty_check}\"] \\set[need_new=\"\"]"
%%> "\\set[need_new=\"\"]"
Setting need_new = 
%%> "\\if[condition=\"${need_new}\"] \\session-new"
%%> "\\if[condition=\"${need_new}\"] \\set[session_id=\"${#session_id}\"]"
%%> "\\session-add-usermsg[session=${session_id}] ${_1}"
Added user message to session '00000006-0000-4000-8000-000000000006'
%%> "\\llm-client-get[provider=openai]"
LLM client ready: openai:b10394de (configured: true)
%%> "\\set[client_id=\"${_client_id}\"]"
Setting client_id = openai:b10394de
%%> "\\get[#active_model_name]"
#active_model_name = default_model
%%> "\\set[has_model=\"${#active_model_name}\"]"
Setting has_model = default_model
%%> "\\set[need_model=\"yes\"]"
Setting need_model = yes
%%> "\\if[condition=\"${has_model}\"] \\set[need_model=\"\"]"
%%> "\\set[need_model=\"\"]"
Setting need_model = 
%%> "\\if[condition=\"${need_model}\"] \\model-new[catalog_id=O4M] default_model"
%%> "\\if[condition=\"${need_model}\"] \\model-activate default_model"
%%> "\\llm-call[client_id=${client_id}, session_id=${session_id}]"
This is a mocking reply (received 1 messages, last: This should go to personal session)
%%> "\\session-add-assistantmsg[session=${session_id}] ${_output}"
Added assistant message to session '00000006-0000-4000-8000-000000000006'
%%> "\\set[1=\"${_output}\"]"
Setting 1 = This is a mocking reply (received 1 messages, last: This should go to personal session)
%%> "\\render-markdown ${_output}"
  This is a mocking reply (received 1 messages, last: This should go to       
  personal session)                                                           
%%> "\\session-show personal_session"
Session: personal_session (ID: 00000006)
System: You are a personal assistant
Created: 2025-01-01 00:00:08
Updated: 2025-01-01 00:00:12
Messages: 2 total
[1] user (00:00:09): This should go to personal session
[2] assistant (00:00:11): This is a mocking reply (received 1 messages, last: This should go to personal session)
%%> "\\session-activate work_session"
Activated session 'work_session' (ID: 00000005, Messages: 0)
%%> "\\send This should go to work session"
%%> "\\session-activate"
Active session: work_session (ID: 00000005)
%%> "\\set[session_id=\"${_session_id}\"]"
Setting session_id = 00000005-0000-4000-8000-000000000005
%%> "\\set[empty_check=\"${session_id}\"]"
Setting empty_check = 00000005-0000-4000-8000-000000000005
%%> "\\set[need_new=\"yes\"]"
Setting need_new = yes
%%> "\\if[condition=\"${empty_check}\"] \\set[need_new=\"\"]"
%%> "\\set[need_new=\"\"]"
Setting need_new = 
%%> "\\if[condition=\"${need_new}\"] \\session-new"
%%> "\\if[condition=\"${need_new}\"] \\set[session_id=\"${#session_id}\"]"
%%> "\\session-add-usermsg[session=${session_id}] ${_1}"
Added user message to session '00000005-0000-4000-8000-000000000005'
%%> "\\llm-client-get[provider=openai]"
LLM client ready: openai:b10394de (configured: true)
%%> "\\set[client_id=\"${_client_id}\"]"
Setting client_id = openai:b10394de
%%> "\\get[#active_model_name]"
#active_model_name = default_model
%%> "\\set[has_model=\"${#active_model_name}\"]"
Setting has_model = default_model
%%> "\\set[need_model=\"yes\"]"
Setting need_model = yes
%%> "\\if[condition=\"${has_model}\"] \\set[need_model=\"\"]"
%%> "\\set[need_model=\"\"]"
Setting need_model = 
%%> "\\if[condition=\"${need_model}\"] \\model-new[catalog_id=O4M] default_model"
%%> "\\if[condition=\"${need_model}\"] \\model-activate default_model"
%%> "\\llm-call[client_id=${client_id}, session_id=${session_id}]"
This is a mocking reply (received 1 messages, last: This should go to work session)
%%> "\\session-add-assistantmsg[session=${session_id}] ${_output}"
Added assistant message to session '00000005-0000-4000-8000-000000000005'
%%> "\\set[1=\"${_output}\"]"
Setting 1 = This is a mocking reply (received 1 messages, last: This should go to work session)
%%> "\\render-markdown ${_output}"
  This is a mocking reply (received 1 messages, last: This should go to work  
  session)                                                                    
%%> "\\session-show work_session"
Session: work_session (ID: 00000005)
System: You are a work assistant
Created: 2025-01-01 00:00:07
Updated: 2025-01-01 00:00:16
Messages: 2 total
[1] user (00:00:13): This should go to work session
[2] assistant (00:00:15): This is a mocking reply (received 1 messages, last: This should go to work session)
%%> "\\send First work message"
%%> "\\session-activate"
Active session: work_session (ID: 00000005)
%%> "\\set[session_id=\"${_session_id}\"]"
Setting session_id = 00000005-0000-4000-8000-000000000005
%%> "\\set[empty_check=\"${session_id}\"]"
Setting empty_check = 00000005-0000-4000-8000-000000000005
%%> "\\set[need_new=\"yes\"]"
Setting need_new = yes
%%> "\\if[condition=\"${empty_check}\"] \\set[need_new=\"\"]"
%%> "\\set[need_new=\"\"]"
Setting need_new = 
%%> "\\if[condition=\"${need_new}\"] \\session-new"
%%> "\\if[condition=\"${need_new}\"] \\set[session_id=\"${#session_id}\"]"
%%> "\\session-add-usermsg[session=${session_id}] ${_1}"
Added user message to session '00000005-0000-4000-8000-000000000005'
%%> "\\llm-client-get[provider=openai]"
LLM client ready: openai:b10394de (configured: true)
%%> "\\set[client_id=\"${_client_id}\"]"
Setting client_id = openai:b10394de
%%> "\\get[#active_model_name]"
#active_model_name = default_model
%%> "\\set[has_model=\"${#active_model_name}\"]"
Setting has_model = default_model
%%> "\\set[need_model=\"yes\"]"
Setting need_model = yes
%%> "\\if[condition=\"${has_model}\"] \\set[need_model=\"\"]"
%%> "\\set[need_model=\"\"]"
Setting need_model = 
%%> "\\if[condition=\"${need_model}\"] \\model-new[catalog_id=O4M] default_model"
%%> "\\if[condition=\"${need_model}\"] \\model-activate default_model"
%%> "\\llm-call[client_id=${client_id}, session_id=${session_id}]"
This is a mocking reply (received 3 messages, last: First work message)
%%> "\\session-add-assistantmsg[session=${session_id}] ${_output}"
Added assistant message to session '00000005-0000-4000-8000-000000000005'
%%> "\\set[1=\"${_output}\"]"
Setting 1 = This is a mocking reply (received 3 messages, last: First work message)
%%> "\\render-markdown ${_output}"
  This is a mocking reply (received 3 messages, last: First work message)     
%%> "\\send Second work message"
%%> "\\session-activate"
Active session: work_session (ID: 00000005)
%%> "\\set[session_id=\"${_session_id}\"]"
Setting session_id = 00000005-0000-4000-8000-000000000005
%%> "\\set[empty_check=\"${session_id}\"]"
Setting empty_check = 00000005-0000-4000-8000-000000000005
%%> "\\set[need_new=\"yes\"]"
Setting need_new = yes
%%> "\\if[condition=\"${empty_check}\"] \\set[need_new=\"\"]"
%%> "\\set[need_new=\"\"]"
Setting need_new = 
%%> "\\if[condition=\"${need_new}\"] \\session-new"
%%> "\\if[condition=\"${need_new}\"] \\set[session_id=\"${#session_id}\"]"
%%> "\\session-add-usermsg[session=${session_id}] ${_1}"
Added user message to session '00000005-0000-4000-8000-000000000005'
%%> "\\llm-client-get[provider=openai]"
LLM client ready: openai:b10394de (configured: true)
%%> "\\set[client_id=\"${_client_id}\"]"
Setting client_id = openai:b10394de
%%> "\\get[#active_model_name]"
#active_model_name = default_model
%%> "\\set[has_model=\"${#active_model_name}\"]"
Setting has_model = default_model
%%> "\\set[need_model=\"yes\"]"
Setting need_model = yes
%%> "\\if[condition=\"${has_model}\"] \\set[need_model=\"\"]"
%%> "\\set[need_model=\"\"]"
Setting need_model = 
%%> "\\if[condition=\"${need_model}\"] \\model-new[catalog_id=O4M] default_model"
%%> "\\if[condition=\"${need_model}\"] \\model-activate default_model"
%%> "\\llm-call[client_id=${client_id}, session_id=${session_id}]"
This is a mocking reply (received 5 messages, last: Second work message)
%%> "\\session-add-assistantmsg[session=${session_id}] ${_output}"
Added assistant message to session '00000005-0000-4000-8000-000000000005'
%%> "\\set[1=\"${_output}\"]"
Setting 1 = This is a mocking reply (received 5 messages, last: Second work message)
%%> "\\render-markdown ${_output}"
  This is a mocking reply (received 5 messages, last: Second work message)    
%%> "\\send Third work message"
%%> "\\session-activate"
Active session: work_session (ID: 00000005)
%%> "\\set[session_id=\"${_session_id}\"]"
Setting session_id = 00000005-0000-4000-8000-000000000005
%%> "\\set[empty_check=\"${session_id}\"]"
Setting empty_check = 00000005-0000-4000-8000-000000000005
%%> "\\set[need_new=\"yes\"]"
Setting need_new = yes
%%> "\\if[condition=\"${empty_check}\"] \\set[need_new=\"\"]"
%%> "\\set[need_new=\"\"]"
Setting need_new = 
%%> "\\if[condition=\"${need_new}\"] \\session-new"
%%> "\\if[condition=\"${need_new}\"] \\set[session_id=\"${#session_id}\"]"
%%> "\\session-add-usermsg[session=${session_id}] ${_1}"
Added user message to session '00000005-0000-4000-8000-000000000005'
%%> "\\llm-client-get[provider=openai]"
LLM client ready: openai:b10394de (configured: true)
%%> "\\set[client_id=\"${_client_id}\"]"
Setting client_id = openai:b10394de
%%> "\\get[#active_model_name]"
#active_model_name = default_model
%%> "\\set[has_model=\"${#active_model_name}\"]"
Setting has_model = default_model
%%> "\\set[need_model=\"yes\"]"
Setting need_model = yes
%%> "\\if[condition=\"${has_model}\"] \\set[need_model=\"\"]"
%%> "\\set[need_model=\"\"]"
Setting need_model = 
%%> "\\if[condition=\"${need_model}\"] \\model-new[catalog_id=O4M] default_model"
%%> "\\if[condition=\"${need_model}\"] \\model-activate default_model"
%%> "\\llm-call[client_id=${client_id}, session_id=${session_id}]"
This is a mocking reply (received 7 messages, last: Third work message)
%%> "\\session-add-assistantmsg[session=${session_id}] ${_output}"
Added assistant message to session '00000005-0000-4000-8000-000000000005'
%%> "\\set[1=\"${_output}\"]"
Setting 1 = This is a mocking reply (received 7 messages, last: Third work message)
%%> "\\render-markdown ${_output}"
  This is a mocking reply (received 7 messages, last: Third work message)     
%%> "\\session-show work_session"
Session: work_session (ID: 00000005)
System: You are a work assistant
Created: 2025-01-01 00:00:07
Updated: 2025-01-01 00:00:28
Messages: 8 total
[1] user (00:00:13): This should go to work session
[2] assistant (00:00:15): This is a mocking reply (received 1 messages, last: This should go to work session)
[3] user (00:00:17): First work message
[4] assistant (00:00:19): This is a mocking reply (received 3 messages, last: First work message)
[5] user (00:00:21): Second work message
[6] assistant (00:00:23): This is a mocking reply (received 5 messages, last: Second work message)
[7] user (00:00:25): Third work message
[8] assistant (00:00:27): This is a mocking reply (received 7 messages, last: Third work message)
%%> "\\get[#active_session_name]"
#active_session_name = work_session
%%> "\\get[#active_session_id]"
#active_session_id = 00000005-0000-4000-8000-000000000005
%%> "\\session-activate personal_session"
Activated session 'personal_session' (ID: 00000006, Messages: 2)
%%> "\\send Back to personal session"
%%> "\\session-activate"
Active session: personal_session (ID: 00000006)
%%> "\\set[session_id=\"${_session_id}\"]"
Setting session_id = 00000006-0000-4000-8000-000000000006
%%> "\\set[empty_check=\"${session_id}\"]"
Setting empty_check = 00000006-0000-4000-8000-000000000006
%%> "\\set[need_new=\"yes\"]"
Setting need_new = yes
%%> "\\if[condition=\"${empty_check}\"] \\set[need_new=\"\"]"
%%> "\\set[need_new=\"\"]"
Setting need_new = 
%%> "\\if[condition=\"${need_new}\"] \\session-new"
%%> "\\if[condition=\"${need_new}\"] \\set[session_id=\"${#session_id}\"]"
%%> "\\session-add-usermsg[session=${session_id}] ${_1}"
Added user message to session '00000006-0000-4000-8000-000000000006'
%%> "\\llm-client-get[provider=openai]"
LLM client ready: openai:b10394de (configured: true)
%%> "\\set[client_id=\"${_client_id}\"]"
Setting client_id = openai:b10394de
%%> "\\get[#active_model_name]"
#active_model_name = default_model
%%> "\\set[has_model=\"${#active_model_name}\"]"
Setting has_model = default_model
%%> "\\set[need_model=\"yes\"]"
Setting need_model = yes
%%> "\\if[condition=\"${has_model}\"] \\set[need_model=\"\"]"
%%> "\\set[need_model=\"\"]"
Setting need_model = 
%%> "\\if[condition=\"${need_model}\"] \\model-new[catalog_id=O4M] default_model"
%%> "\\if[condition=\"${need_model}\"] \\model-activate default_model"
%%> "\\llm-call[client_id=${client_id}, session_id=${session_id}]"
This is a mocking reply (received 3 messages, last: Back to personal session)
%%> "\\session-add-assistantmsg[session=${session_id}] ${_output}"
Added assistant message to session '00000006-0000-4000-8000-000000000006'
%%> "\\set[1=\"${_output}\"]"
Setting 1 = This is a mocking reply (received 3 messages, last: Back to personal session)
%%> "\\render-markdown ${_output}"
  This is a mocking reply (received 3 messages, last: Back to personal        
  session)                                                                    
%%> "\\get[#active_session_name]"
#active_session_name = personal_session
%%> "\\session-delete work_session"
Deleted session 'work_session' (ID: 00000005)
%%> "\\session-delete personal_session"
Deleted session 'personal_session' (ID: 00000006)
%%> "\\try \\session-delete Session"
%%> "\\session-delete Session"
Deleted session 'Session 1' (ID: 00000001)
%%> "\\try \\session-delete session_1"
%%> "\\session-delete session_1"